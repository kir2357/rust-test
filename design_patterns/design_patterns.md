# 3.Design Patterns

[Design Patterns - Rust Design Patterns](https://rust-unofficial.github.io/patterns/patterns/index.html)

[『Rust Design Patterns』を翻訳してみました（デザインパターン・アンチパターン編） - Qiita](https://qiita.com/Yappii_111/items/654717e6a6a980722189)


デザインパターンは、「ソフトウェア設計において、与えられた文脈の中でよく起こる問題に対する、一般的で再利用可能な解決方法」

デザインパターンは非常に言語に依存しています。

### YAGNI

You Aren't Going to Neet It.

YAGNI をデザインパターンに適用してみると、Rust の機能によって多くのパターンを捨て去ることができるとわかります。例えば、Rust ではトレイトを使うことができるため Strategy パターンが必要ありません。

## 3.1. Behavioural

### 3.1.1. Command

Command パターンの基本的な考え方は、アクションを独自のオブジェクトに分離し、それらをパラメーターとして渡すことです。

コマンドのログの保存を行っていれば巻き戻しも可能になる

トレイトオブジェクトを利用する方法、と関数ポインタを利用する方法、Fnトレイトオブジェクトを使用する方法がある

コマンドの処理が小さい・関数やクロージャで定義⇒関数ポインタ

コマンドが構造体・関数や変数が別のモジュールで定義⇒トレイトオブジェクト

Fnトレイトオブジェクトの利点はよく分からん

パフォーマンスでは動的ディスパッチを使わない関数ポインタが良い

### 3.1.2. Interpreter

なんらかの文法規則をもった文書(プログラム言語)を解析し、その結果得られた手順(命令)に基づき処理を実行していくというパターン

Rustでは以下を定義する

- ドメイン固有言語
- この言語のための文法
- 問題を解くインタプリタ

マクロルールを使う方法もある。

使う場面が創造できないため保留

